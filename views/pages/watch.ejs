<section class="space-y-5">
  <div class="flex items-start justify-between gap-3">
    <div class="flex gap-3">
      <img src="<%= movie.posterUrl || 'https://placehold.co/300x450?text=Poster' %>"
           class="w-20 h-28 sm:w-28 sm:h-40 rounded-2xl object-cover border border-white/10 bg-white/5"
           onerror="this.src='https://placehold.co/300x450?text=Poster'"/>

      <div>
        <h1 class="text-xl sm:text-2xl font-semibold tracking-tight"><%= movie.title %></h1>
        <div class="text-zinc-400 text-sm mt-1">
          <span class="mr-2"><%= movie.year || '‚Äî' %></span>
          <span class="px-2 py-1 rounded-full border border-white/10 bg-white/5 text-xs"><%= movie.genre || 'Movie' %></span>
          <span class="ml-2 text-xs opacity-80">üëÅÔ∏è <%= movie.views %></span>
        </div>
        <p class="text-zinc-300/90 text-sm mt-3 max-w-2xl leading-relaxed">
          <%= movie.description || 'No description.' %>
        </p>

        <div class="mt-3 flex flex-wrap gap-2">
          <a href="/" class="spa-link rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10 transition">‚Üê Back</a>
          <button id="btnTheater" class="rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10 transition">Theater</button>
          <button id="btnFull" class="rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10 transition">Fullscreen</button>
          <button id="btnCopy" class="rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10 transition">Copy Link</button>
        </div>
      </div>
    </div>
  </div>

  <div id="playerShell" class="relative rounded-3xl overflow-hidden border border-white/10 bg-black shadow-2xl shadow-fuchsia-500/10">
    <div class="absolute inset-0 pointer-events-none">
      <div class="absolute -top-10 -left-10 w-60 h-60 rounded-full blur-3xl bg-fuchsia-600/20"></div>
      <div class="absolute -bottom-10 -right-10 w-60 h-60 rounded-full blur-3xl bg-cyan-500/15"></div>
    </div>

    <div class="relative aspect-video bg-black">
      <!-- NOTE: embedUrl dirakit via API saat load watch.js jika mau dynamic. Di SSR ini kita pakai template server / setting -->
      <iframe
        id="doodFrame"
        src="<%= (settings.embed_template || 'https://doodstream.com/e/{ID}').replace('{ID}', encodeURIComponent(movie.embedIdOrUrl)) %>"
        class="absolute inset-0 w-full h-full"
        allowfullscreen
        referrerpolicy="no-referrer"
      ></iframe>

      <!-- Overlay UI -->
      <div id="playerOverlay" class="absolute inset-0 flex flex-col justify-between opacity-0 hover:opacity-100 transition-opacity duration-300">
        <div class="p-3 sm:p-4 flex items-center justify-between">
          <div class="flex items-center gap-2">
            <div class="h-10 w-10 rounded-2xl border border-white/10 bg-white/10 backdrop-blur grid place-items-center">‚ñ∂</div>
            <div>
              <div class="text-sm font-medium leading-tight line-clamp-1"><%= movie.title %></div>
              <div class="text-xs text-zinc-300/80">Custom Player UI</div>
            </div>
          </div>
          <button id="btnCloseTheater" class="hidden rounded-xl border border-white/10 bg-white/10 px-3 py-2 text-xs hover:bg-white/20 transition">
            Exit Theater
          </button>
        </div>

        <div class="p-3 sm:p-4">
          <div class="rounded-2xl border border-white/10 bg-black/40 backdrop-blur px-4 py-3">
            <div class="flex items-center justify-between gap-2">
              <div class="text-xs text-zinc-300/80">Tip: kalau iframe loading lama, refresh.</div>
              <div class="flex items-center gap-2">
                <button id="btnReload" class="rounded-xl border border-white/10 bg-white/10 px-3 py-2 text-xs hover:bg-white/20 transition">Reload</button>
                <button id="btnReport" class="rounded-xl border border-white/10 bg-white/10 px-3 py-2 text-xs hover:bg-white/20 transition">Report</button>
              </div>
            </div>

            <div class="mt-3 h-2 rounded-full bg-white/10 overflow-hidden">
              <div id="fakeProg" class="h-full w-0 bg-white/40"></div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>
